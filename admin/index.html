<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Questa</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="stylesheet" href="/assets/css/ui-modal.css">
    <link rel="stylesheet" href="/assets/css/admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
    <script src="/assets/js/pwa.js"></script>
</head>
<body class="admin-body">
    <!-- Admin Header -->
    <header class="admin-header">
        <div class="admin-header-content">
            <div class="admin-brand">
                <div class="admin-logo">
                    <img src="/logo.svg" alt="Questa" width="48" height="48">
                </div>
                <div class="admin-brand-text">
                    <h1>Questa Admin</h1>
                    <span class="admin-subtitle">Management Dashboard</span>
                </div>
            </div>
            
            <div class="admin-header-actions">
                <!-- Mobile Menu Toggle -->
                <button id="mobile-menu-toggle" class="admin-btn admin-btn-secondary mobile-menu-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                
                <button id="refresh-admin" class="admin-btn admin-btn-secondary">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 12A9 9 0 0 1 12 3A9 9 0 0 1 21 12A9 9 0 0 1 12 21A9 9 0 0 1 3 12Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 3V12L16.5 16.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="btn-text">Refresh</span>
                </button>
                
                <div class="admin-user-menu">
                    <button class="admin-user-btn" id="admin-user-menu-btn">
                        <div class="admin-user-avatar">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20 21V19A4 4 0 0 0 16 15H8A4 4 0 0 0 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <span class="admin-user-name" id="admin-user-name">Admin</span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    
                    <div class="admin-user-dropdown" id="admin-user-dropdown">
                        <div class="admin-user-info">
                            <div class="admin-user-email" id="admin-user-email">admin@questa.com</div>
                            <div class="admin-user-role">Administrator</div>
                        </div>
                        <div class="admin-user-divider"></div>
                        <button class="admin-dropdown-item" id="admin-settings-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                                <path d="M19.4 15A1.65 1.65 0 0 0 21 13.5A1.65 1.65 0 0 0 19.4 12A1.65 1.65 0 0 0 18 10.5A1.65 1.65 0 0 0 16.6 12A1.65 1.65 0 0 0 18 13.5A1.65 1.65 0 0 0 19.4 15Z" stroke="currentColor" stroke-width="2"/>
                                <path d="M4.6 15A1.65 1.65 0 0 1 6 13.5A1.65 1.65 0 0 1 4.6 12A1.65 1.65 0 0 1 3 10.5A1.65 1.65 0 0 1 4.6 9A1.65 1.65 0 0 1 6 10.5A1.65 1.65 0 0 1 4.6 12A1.65 1.65 0 0 1 3 13.5A1.65 1.65 0 0 1 4.6 15Z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            Settings
                        </button>
                        <button class="admin-dropdown-item" id="admin-logout-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 21H5A2 2 0 0 1 3 19V5A2 2 0 0 1 5 3H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <polyline points="16,17 21,12 16,7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <line x1="21" y1="12" x2="9" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Sign Out
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Overlay -->
    <div class="admin-mobile-overlay" id="admin-mobile-overlay"></div>

    <!-- Admin Sidebar -->
    <aside class="admin-sidebar" id="admin-sidebar">
        <nav class="admin-nav">
            <div class="admin-nav-section">
                <h3 class="admin-nav-title">Dashboard</h3>
                <a href="#overview" class="admin-nav-item active" data-section="overview">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Overview
                </a>
            </div>
            
            <div class="admin-nav-section">
                <h3 class="admin-nav-title">Management</h3>
                <a href="#tasks" class="admin-nav-item" data-section="tasks">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 11H15M9 15H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L19.7071 9.70711C19.8946 9.89464 20 10.149 20 10.4142V19C20 20.1046 19.1046 21 18 21H17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M13 3V9H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Tasks
                </a>
                <a href="#submissions" class="admin-nav-item" data-section="submissions">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 13H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 17H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Submissions
                    <span class="admin-nav-badge" id="submissions-badge">0</span>
                </a>
                <a href="#withdrawals" class="admin-nav-item" data-section="withdrawals">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="1" y="6" width="22" height="15" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                        <path d="M7 10H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M7 14H13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="12" cy="3" r="1" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Withdrawals
                    <span class="admin-nav-badge" id="withdrawals-badge">0</span>
                </a>
            </div>
            
            <div class="admin-nav-section">
                <h3 class="admin-nav-title">System</h3>
                <a href="#users" class="admin-nav-item" data-section="users">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M23 21V19C23 18.1645 22.7155 17.3541 22.2094 16.7094C21.7033 16.0646 20.9971 15.625 20.2 15.4629" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 3.46289C16.797 3.625 17.5033 4.06464 18.0094 4.70941C18.5155 5.35418 18.8 6.16454 18.8 7C18.8 7.83546 18.5155 8.64582 18.0094 9.29059C17.5033 9.93536 16.797 10.375 16 10.5371" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Users
                </a>
                <a href="#analytics" class="admin-nav-item" data-section="analytics">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 20V10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 20V4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M6 20V14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Analytics
                </a>
            </div>
        </nav>
    </aside>

    <!-- Admin Main Content -->
    <main class="admin-main">
        <div class="admin-content">
            <!-- Overview Section -->
            <section id="overview-section" class="admin-section active">
                <div class="admin-section-header">
                    <h2>Dashboard Overview</h2>
                    <p class="admin-section-subtitle">Monitor and manage your Questa platform</p>
                </div>
                
                <!-- Stats Cards -->
                <div class="admin-stats-grid">
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon submissions">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value" id="stats-pending-submissions">0</div>
                            <div class="admin-stat-label">Pending Submissions</div>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon tasks">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 11H15M9 15H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L19.7071 9.70711C19.8946 9.89464 20 10.149 20 10.4142V19C20 20.1046 19.1046 21 18 21H17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value" id="stats-total-tasks">0</div>
                            <div class="admin-stat-label">Total Tasks</div>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon withdrawals">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="1" y="6" width="22" height="15" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                                <path d="M7 10H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value" id="stats-pending-withdrawals">0</div>
                            <div class="admin-stat-label">Pending Withdrawals</div>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon users">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value" id="stats-total-users">0</div>
                            <div class="admin-stat-label">Total Users</div>
                        </div>
                    </div>
                </div>
                
                <!-- Additional Analytics Row -->
                <div class="admin-stats-grid">
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon revenue">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 1V23M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6312 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6312 13.6815 18 14.5717 18 15.5C18 16.4283 17.6312 17.3185 16.9749 17.9749C16.3185 18.6312 15.4283 19 14.5 19H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value" id="stats-total-paid">₱0</div>
                            <div class="admin-stat-label">Total Paid Out</div>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon earnings">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value" id="stats-total-earnings">₱0</div>
                            <div class="admin-stat-label">Total Earnings</div>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon completed">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value" id="stats-completed-tasks">0</div>
                            <div class="admin-stat-label">Completed Tasks</div>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon active">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                <path d="M8 12L10.5 14.5L16 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value" id="stats-active-tasks">0</div>
                            <div class="admin-stat-label">Active Tasks</div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="admin-quick-actions">
                    <h3>Quick Actions</h3>
                    <div class="admin-actions-grid">
                        <button class="admin-action-btn" data-action="create-task">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Create New Task
                        </button>
                        <button class="admin-action-btn" data-action="review-submissions">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            Review Submissions
                        </button>
                        <button class="admin-action-btn" data-action="process-withdrawals">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 15V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <polyline points="7,10 12,15 17,10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <line x1="12" y1="15" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Process Withdrawals
                        </button>
                        <button class="admin-action-btn" data-action="view-analytics">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 20V10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 20V4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M6 20V14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            View Analytics
                        </button>
                    </div>
                </div>
            </section>

            <!-- Tasks Section -->
            <section id="tasks-section" class="admin-section">
                <div class="admin-section-header">
                <h2>Task Management</h2>
                    <button class="admin-btn admin-btn-primary" id="create-task-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Create Task
                    </button>
                </div>
                
                
                <!-- Tasks List -->
                <div class="admin-table-section">
                    <h3>All Tasks</h3>
                    <div id="tasks-list" class="admin-table-container"></div>
                </div>
            </section>

            <!-- Submissions Section -->
            <section id="submissions-section" class="admin-section">
                <div class="admin-section-header">
                    <h2>Task Submissions</h2>
                    <p class="admin-section-subtitle">Review and approve task submissions</p>
            </div>
                <div id="submissions-list" class="admin-table-container"></div>
            </section>
            
            <!-- Withdrawals Section -->
            <section id="withdrawals-section" class="admin-section">
                <div class="admin-section-header">
                <h2>Withdrawals Management</h2>
                    <div class="admin-filter-buttons">
                        <button class="admin-filter-btn active" data-filter="pending">Pending</button>
                        <button class="admin-filter-btn" data-filter="approved">Approved</button>
                        <button class="admin-filter-btn" data-filter="rejected">Rejected</button>
                        <button class="admin-filter-btn" data-filter="all">All</button>
                    </div>
                </div>
                <div id="withdrawals-list" class="admin-table-container"></div>
            </section>

            <!-- Users Section -->
            <section id="users-section" class="admin-section">
                <div class="admin-section-header">
                    <h2>User Management</h2>
                    <p class="admin-section-subtitle">Manage user accounts and permissions</p>
                    <div class="admin-section-actions">
                        <button class="admin-btn admin-btn-primary" id="manage-balance-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M3 5v14a2 2 0 0 0 2 2h16v-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M18 12v.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Manage Balances
                        </button>
                    </div>
                </div>
                <div id="users-list" class="admin-table-container"></div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics-section" class="admin-section">
                <div class="admin-section-header">
                    <h2>Analytics & Reports</h2>
                    <p class="admin-section-subtitle">Platform performance and insights</p>
                </div>
                <div class="admin-analytics-grid">
                    <div class="admin-analytics-card">
                        <h3>Platform Growth</h3>
                        <p>Analytics coming soon...</p>
                    </div>
            </div>
            </section>
        </div>
    </main>

    <!-- Scripts -->
    <script type="module" src="/assets/js/supabase.js"></script>
    <script type="module" src="/assets/js/ui-modal.js"></script>
    <script type="module" src="/assets/js/admin-auth-secure.js"></script>
    <script type="module" src="/assets/js/admin-users.js"></script>
    <script type="module" src="/assets/js/admin-tasks.js"></script>
    <script type="module" src="/assets/js/admin-submissions.js"></script>
    <script type="module" src="/assets/js/admin-withdrawals.js"></script>
    <script type="module" src="/assets/js/admin-balance.js"></script>
    <script type="module" src="/assets/js/admin-handler.js"></script>
    <script>
        // Toggle referral email field visibility
        function toggleReferralEmail() {
            const referralRequired = document.getElementById('referral-required');
            const referralEmailGroup = document.getElementById('referral-email-group');
            const emailListInput = document.getElementById('email-list');
            
            if (!referralRequired || !referralEmailGroup || !emailListInput) {
                console.log('Elements not found, skipping toggle');
                return;
            }
            
            if (referralRequired.value === 'true') {
                referralEmailGroup.style.display = 'block';
                emailListInput.required = true;
            } else {
                referralEmailGroup.style.display = 'none';
                emailListInput.required = false;
                emailListInput.value = '';
            }
        }

        // Preview task image
        function previewTaskImage() {
            const imageUrl = document.getElementById('task-image-url').value;
            const previewContainer = document.getElementById('task-image-preview');
            const previewImg = document.getElementById('preview-img');
            
            if (imageUrl && imageUrl.trim() !== '') {
                previewImg.src = imageUrl;
                previewContainer.style.display = 'block';
                
                // Handle image load error
                previewImg.onerror = function() {
                    previewContainer.innerHTML = '<div class="admin-image-error" style="color: #dc2626; margin-top: 8px; font-size: 0.875rem;">⚠️ Invalid image URL or image cannot be loaded</div>';
                };
                
                // Reset error message on successful load
                previewImg.onload = function() {
                    previewContainer.innerHTML = '<img id="preview-img" src="' + imageUrl + '" alt="Task Image Preview" style="max-width: 100%; height: auto; border-radius: 8px; margin-top: 8px;">';
                };
            } else {
                previewContainer.style.display = 'none';
            }
        }
    </script>
</body>
</html>